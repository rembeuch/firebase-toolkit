{"ast":null,"code":"var _jsxFileName = \"/home/beucherier/code/rembeuch/firebase/src/components/Post.js\",\n    _s = $RefreshSig$();\n\nimport { doc, updateDoc } from \"firebase/firestore\";\nimport React, { useState } from \"react\";\nimport { db } from \"../utils/firebase.config\";\nimport CommentPost from \"./CommentPost\";\nimport Delete from \"./Delete\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Post = _ref => {\n  _s();\n\n  let {\n    post,\n    user\n  } = _ref;\n  const [edit, setEdit] = useState(false);\n  const [editMess, setEditMess] = useState(null);\n\n  const dateFormater = date => {\n    let days = Math.floor((new Date() - new Date(date)) / (1000 * 3600 * 24));\n\n    if (days === 0) {\n      return \"aujourd'hui\";\n    } else if (days === 1) {\n      return \"il y a 1 jour\";\n    } else {\n      return \"il y a \" + days + \" jours\";\n    }\n  };\n\n  const handleEdit = () => {\n    setEdit(false);\n\n    if (editMess) {\n      updateDoc(doc(db, \"posts\", post.id), {\n        message: editMess\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"left-part\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: post.author[0]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: post.author\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: [\"Post\\xE9 \", dateFormater(post.date)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this), post.authorId === (user === null || user === void 0 ? void 0 : user.uid) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-part\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => setEdit(!edit),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa-solid fa-pen-to-square\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Delete, {\n          postId: post.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this), edit ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        autoFocus: true,\n        defaultValue: editMess ? editMess : post.message,\n        onChange: e => setEditMess(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"edit-btn\",\n        onClick: () => handleEdit(),\n        children: \"Modifier message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: editMess ? editMess : post.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CommentPost, {\n      post: post\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Post, \"7xCdFaWyz1vBAJ+V9By15CHz5XA=\");\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["/home/beucherier/code/rembeuch/firebase/src/components/Post.js"],"names":["doc","updateDoc","React","useState","db","CommentPost","Delete","Post","post","user","edit","setEdit","editMess","setEditMess","dateFormater","date","days","Math","floor","Date","handleEdit","id","message","author","authorId","uid","e","target","value"],"mappings":"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","sourcesContent":["import { doc, updateDoc } from \"firebase/firestore\";\nimport React, { useState } from \"react\";\nimport { db } from \"../utils/firebase.config\";\nimport CommentPost from \"./CommentPost\";\nimport Delete from \"./Delete\";\n\nconst Post = ({ post, user }) => {\n  const [edit, setEdit] = useState(false);\n  const [editMess, setEditMess] = useState(null);\n\n  const dateFormater = (date) => {\n    let days = Math.floor((new Date() - new Date(date)) / (1000 * 3600 * 24));\n\n    if (days === 0) {\n      return \"aujourd'hui\";\n    } else if (days === 1) {\n      return \"il y a 1 jour\";\n    } else {\n      return \"il y a \" + days + \" jours\";\n    }\n  };\n\n  const handleEdit = () => {\n    setEdit(false);\n\n    if (editMess) {\n      updateDoc(doc(db, \"posts\", post.id), { message: editMess });\n    }\n  };\n\n  return (\n    <div className=\"post\">\n      <div className=\"post-header\">\n        <div className=\"left-part\">\n          <div className=\"title\">\n            <span>{post.author[0]}</span>\n            <h2>{post.author}</h2>\n          </div>\n          <h5>Post√© {dateFormater(post.date)}</h5>\n        </div>\n        {post.authorId === user?.uid && (\n          <div className=\"right-part\">\n            <span onClick={() => setEdit(!edit)}>\n              <i className=\"fa-solid fa-pen-to-square\"></i>\n            </span>\n            <Delete postId={post.id} />\n          </div>\n        )}\n      </div>\n      {edit ? (\n        <>\n          <textarea\n            autoFocus\n            defaultValue={editMess ? editMess : post.message}\n            onChange={(e) => setEditMess(e.target.value)}\n          ></textarea>\n          <button className=\"edit-btn\" onClick={() => handleEdit()}>\n            Modifier message\n          </button>\n        </>\n      ) : (\n        <p>{editMess ? editMess : post.message}</p>\n      )}\n      <CommentPost post={post} />\n    </div>\n  );\n};\n\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}